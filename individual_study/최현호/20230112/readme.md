# 직접 도커 이미지를 만들어 보기

강의 번호: Docker
복습: No
작성일시: 2023년 1월 6일 오후 4:17

## 도커 이미지 생성하는 순서

직접 만들거나 이미 docker 허브에 있던 이미지를 사용하여 컨테이너를 만들 수 있었음.

실제로 이미지를 만드는 순서는

1. 먼저 Dockerfile을 작성하고 (컨테이너가 어떻게 행동해야 하는지를 입력해둔 파일)
2. 도커클라이언트에 전해주면
3. 도커 서버에서 전달된 모든것들을 작업을하면
4. 이미지가 생성된다.

## Dockerfile 만들기

이미지는 실행될 명령어와 스냅샷이 필요하다

도커파일을 만들때는 

1. 베이스 이미지를 명시해주고(파일 스냅샷에 해당)
2. 추가적으로 필요한 파일을 다운받기 위한 몇가지 명령어를 명시하고 (파일 스냅샷에 해당)
3. 컨테이너 시작시 실행될 명령어를 명시해주면 완성

### 베이스 이미지란?

도커 이미지는 여러개의 레이어로 이루어져 있는데 , 이 레이어 중에서 기반이 되는 부분을 의미한다. OS라고 생각하면 됨.

### Hello 를 출력하는 이미지를 만들어보자

1.도커 파일을 만들 폴더 하나 만들기

1. 파일 만들기

```docker
#베이스 이미지를 명시해준다
FROM baseImage

#추가적으로 필요한 파일들을 다운로드 받는다
RUN command

# 컨테이너 시작시 실행될 명령들을 명시해준다
CMD ["executable"]
```

from , run , cmd는 도커서버에게 무엇을 하라고 알려주는것.

From : 이미지 생성시 기반이 되는 이미지 레이어를 의미

<이미지 이름>:<태그> 형식으로 작성한다.

태그를 안붙이면 latest 최근것으로 받는다

RUN : 도커이미지가 생성되기전에 수행할 쉘 명령어

CMD : 컨테이너가 시작되었을때 실행할 실행파일 또는 쉘스크립트. 해당 명령어는 Dockerfile내에서 단 한번만 사용가능.

## 도커 파일로 도커 이미지 만들기

도커 파일에 입력된 것들이 도커 클라이언트에 전달되어서 도커서버가 인식하게 하여하 함.

그러기 위해서는 docker build./ 또는 docker build .

명령어를 사용해야함.

 

### build 명령어

해당 디렉토리 내에서 dockerfile이라는 파일을 찾아서 도커 클라이언트에 전달해주는 명령이다.

```java
docker build ./
```