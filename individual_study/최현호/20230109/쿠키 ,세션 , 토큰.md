# 쿠키 ,세션 , 토큰

강의 번호: Back-end
복습: No
작성일시: 2022년 9월 21일 오후 1:19

## 쿠키

웹서버에서 보낸 적은양의 정보를 웹브라우저에 저장하게하여, 필요할때 호출할 수 있는 것이다.

또한 쿠키를 저장한 뒤에는 , 해당 브라우저는 요청에 쿠키를 함께 보내게 된다.

적은양의 정보에는 Auth 뿐만 아니라, 

유효기간 또한 존재한다. 

## 세션

서버로 가는 모든요청이 , 이전리퀘스트와 독립적으로 다뤄지는 것. 요청끼리에는 연결이 없다. 왜냐하면 서버는 각 요청에 대한 연결을 기억하지 않기 때문이다.

세션의 원리는 이렇다 . 

유저가 처음 DB에 맞는 정보를 입력하여 서버에 요청을 보낸다. 

서버는 이를 확인하여 맞는 정보면 세션DB에  고유한 유저ID를 새로 생성한다.

그 후 쿠키를 통해 브라우저에 해당 ‘세션DB 에 저장된 고유한 유저 ID’ 를 보내고, 이 쿠키를 통해  브라우저에 저장된다.

그후 다시 이브라우저에 접속하게되면, 이미 쿠키가 생성되었기 때문에 

 ‘세션DB 에 저장된 고유한 유저 ID’를 쿠키에 담아 서버에 요청하게 된다.

서버는 쿠키에 담긴  ‘세션DB 에 저장된 고유한 유저 ID’를 세션DB에 있던것을 비교해 보고서야 

요청을 보낸 이가 처음 접속했던 유저임을 알 수 있게 된다.

### 쿠키는 세션ID를 담기 위한 매개체이다.

위와 같은 방식때문에 , 쿠키를 가지지않는 네이티브앱(IOS, Android)에서는 세션을 사용할 수 없다.

## 토큰

그냥 String이지만, 

로그인 예시를 통해 세션과의 차이를 확인해 보면,

유저가 로그인을 하기위한 정보를 보낸다.

서버는 해당 유저의 정보를 이용해 특정알고리즘으로 긴 String을 생성한다. 이를 토큰이라고 한다.

이를 브라우저에 저장하게 된다.

그리고 다시 요청할때는 이 토큰을 서버에게 보내면, 서버는 이를 유효한지 체크하여 유저임을 인식한다.

세션과의 차이는 세션은 서버가 세션DB를 통해 확인하는 작업을 거쳐야 하지만, 토큰은 서버가 확인만 하면 된다는 점이다.

## 세션과 토큰의 장단점

세션을 사용하면 ,로그인된 유저를 모두 저장한다.

서버는 로그인된 유저 중 특정유저에게 강제로 로그아웃을 시키거나 , 차단하는 작업을 할 수 있다.( 세션DB에서 해당 유저의 ID를 삭제하면 됨)

단점은 해당 유저를 모두 세션DB에 저장해야하기 때문에 사람이 많이 이용하는 서비스에서는 DB유지에 대한 비용을 무시할 수 없다는 점이다.

JWT 의 경우 서버는 오직 토큰이 유효한지 확인하는 방법밖에 유저를 구분할 수 없다. 그렇기 때문에 로그인된 유저에게 특정작업을 할 수 없다.

DB가 필요하지 않다.

출처 : 

[세션 vs 토큰 vs 쿠키? 기초개념 잡아드림. 10분 순삭!](https://www.youtube.com/watch?v=tosLBcAX1vk)